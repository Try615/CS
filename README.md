# CS

머리속 지식체계를 개찬하리라.  
해당 레포는 가독성 좋게 보이기 위해서 작성한 내용이 아님.  
단순히 기입자가 자신만을 위해 작성한 것임을 알림.

<br>

---

# SRE

출처(https://medium.com/naverfinancial/구글의-sre-원리원칙-13ffeba6ba49)

SRE(Site Reliability Engineering) : 사이트 신뢰성 엔지니어링  
구글 SRE 사이트 메인 페이지에는 아래의 한 문자으로 SRE를 정의하고 있다.  
`SRE는 운영을 소프트웨어 문제처럼 다룰 때 얻게 되는 것이다.`  
서문에는 사이트, 신뢰성, 엔지니어링 세 단어 중 *엔지니어링*을 강조하며 다음과 같이 말한다.  
`컴퓨팅 시스템을 설계하고 개발하는데 컴퓨터 과학, 공학 원리와 원칙을 적용한다.`

DevOps와의 차이점  
개발과 운영을 함께 생각한다는 방향성, 역할, 문화를 가르키는 점에서 두 용어는 비슷해 보인다. 구글은 아래처럼 구분하고 있다.  
`class SRE implements interface DevOps`

```
DevOps라는 용어는 2008년 말 업계에 등장하여 사용되고 있다. DevOps의 핵심 원칙(시스템 설계와 개발 각 단계에 관여, 사람보다 자동화에 의존하기, 운영에 엔지니어링 실천 방향 및 도구 적용하기)은 SRE 원칙과 실천 방향에 대응된다. DevOps를 운영, 구조 관리, 인사의 넓은 관점에서 SRE 핵심 원칙의 일반화로 볼 수 있다. 반대로 SRE를 DevOps에 특정한 구현으로 볼 수 있다.

- 사이트 신뢰성 엔지니어링 소개 중
```

구글의 SRE 7개의 원리 원칙

1. 위험 요소 수용하기(Embracing Risk)  
   100% 신뢰성은 절대 좋은 목표가 아니다.  
   신뢰성이 높을수록, 신뢰성을 더 높이기 위한 비용이 증가한다. 현실적인 목표로 타협하고 지켜나가는 것이 더 중요하다.

   서비스의 위험 측정  
   목표를 세우고 확인하기 위해서는 지표를 설정해야 한다.

   - 시간 기준 = uptime / (uptime + downtime)
   - 요청 기준 = 성공한 요청 수 / 총 요청 수

   위험 수용도  
    신뢰성 목표를 어느 정도로 세워야 하는가에 대한 기준입니다.

   가용성의 목표 수치  
    사용자가 서비스에 기대하는 수준, 영업 이익과 관련성, 서비스의 유료 여부, 경쟁자의 유무, 대상이 소비자인지 기업인지에 따라 달라집니다.

   실패의 종류  
    장애의 횟수 뿐만 아니라, 어떤 장애가 어떻게 발생하는지도 중요하다.  
    ex) 조금씩 꾸준히 일어나는 장애와 짧은 시간 전면 장애

   비용  
    신뢰성을 높이기 위해 투입할 수 있는 리소스

   에러 예산  
    개발자는 빠르게 많은 기능을 개발하고 싶고, SRE팀은 서비스를 안정적으로 유지하고 싶어 한다. 두 팀은 오류 수용성, 테스트, Push 주기, 카나리 기간 및 규모 등등에서 의견 충돌이 발생하기 쉽다.

   SLO로 에러 예산을 세우고 비교하면서, 개발 속도를 조절하면 갈등을 줄이고 합리적으로 두 목표를 조율할 수 있다. 만약 목표보다 에러가 적었다면, 남은 기간에는 개발 속도를 높이는 방식이다.

2. 서비스 수준 목표(Service Level Objectives)  
   용어 정의

   - SLI(Indicator) : 서비스의 특정 부분에 대한 정량적 측도
   - SLO(Objectives) : SLI로 측정되는 값의 목표치
   - SLA(Agreements) : 명시적/묵시적 합의. SLO를 달성하지 못했을 때 무슨일이 벌어지는가?

   SLI 실전  
   무엇을 신경써야 할지는 서비스의 종류에 따라 다르다.

   - 사용자와 맞닿는 서비스 시스템 : 가용성, 지연시간, 처리량
   - 저장 시스템 : 지연시간, 가용성, 지속성
   - 빅데이터 시스템 : 처리량, end-to-end 지연시간

   값의 평균 뿐 아니라 분포 역시 확인해야 한다.

   SLO 실전  
   목표 정하기

   - 현재 퍼포먼스에 집착하지 않기
   - 단순하게 설정하기
   - 절대적인(100%와 같은) 목표 피하기
   - 적은 수의 SLO 설정하기
   - 느슨한 목표부터 시작하기

   SLO는 목표치이다.

   - 여유분을 두고 설정할 것
   - 초과 달성하기 위해 노력할 필요는 없다

3. 삽질은 이제 그만!(Eliminating Toil)  
   Toil(삽질, 수고로움)  
   다음의 특성을 가진 일들을 뜻함.

   - 수동, 반복작업, 자동화 가능, 피동적으로 대응해야함, 꾸준히 손이 감, 서비스가 성장하며 따라 성장함.

   자연스럽게 증가하는 경향이 있으므로, 의식적으로 관리하여 업무 시간의 50% 이하로 줄여야 한다.

   일의 분류

   - Software engineering : 코드 작성 및 수정, 설계 및 문서화
   - System engineering : 시스템 설정, 시스템 문서화
   - Toil
   - Oveerhead : 서비스와 무관한 행정 업무

   Engineering에 50% 이상의 시간을 사용할 것을 권장한다.

4. 분산 시스템 모니터링(Monitoring Distributed Systems)  
   모니터링을 하는 이유  
   장기간 트랜드 분석, 비교(시간대별, 실험군), 경고(Alert), 대시보드 구축, 디버깅

   증상과 원인, 블랙박스 & 화이트박스 테스트

   - 증상 : 무엇이 비정상적인가, 블랙박스 모니터링 파악
   - 원인 : 왜 비정상적인가, 화이트박스 모니터링 파악

   Multilayered System에서는 한 곳의 증상이 다른 곳의 원인이 됩니다. 그러므로 화이트박스 모니터링뿐 아니라 블랙박스 모니터링도 신경 써야 합니다.

   4가지 중요 지표  
   Latency, Traffic, Errors, Saturation(포화 상태)
